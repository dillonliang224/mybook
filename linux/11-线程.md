[toc]

###为什么要有线程？

其实，对于任何一个进程来讲，即便我们没有主动去创建线程，进程也是默认有一个主线程的。线程是负责执行二进制指令的，它会根据项目执行计划书，一行一行执行下去。进程要比线程管的宽多了，除了执行指令之外，内存、文件系统等等都要它来管。

所以，进程相当于一个项目，而线程就是为了完成项目需求，而建立的一个个开发任务。默认情况下，你可以建一个大的任务，就是完成某某功能，然后交给一个人让它从头做到尾，这就是主线程。但是有时候，你发现任务是可以拆解的，如果相关性没有非常大前后关联关系，就可以并行执行。

### 为啥不多创建几个进程呢？
第一，创建进程占用资源太多；第二，进程之间的通信需要数据在不同的内存空间传来传去，无法共享。

### 线程访问的数据

- 线程栈上的本地数据
- 在整个进程里共享的全局数据
- 线程私有数据

### 数据保护

条件变量和互斥锁配合使用。

### 总结时刻

!()[https://static001.geekbang.org/resource/image/02/58/02a774d7c0f83bb69fec4662622d6d58.png]