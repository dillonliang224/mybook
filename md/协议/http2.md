# HTTP2

1. HTTP/2支持所有HTTP/1.1的核心特性

2. HTTP/2中基础的协议单元是帧

3. 支持HTTP/2的服务端响应状态码101表示接受升级协议的请求。在结束101响应的空行之后，服务端发送的第一个HTTP/2帧必须是由一个SETTINGS帧组成的服务端连接前奏。

4. 客户端对”https“URI发起请求时使用TLS-ALPN（带有应用层协议协商扩展（ALPN）的TLS）。运行在TLS之上的HTTP/2使用“h2”协议标识符。

5. 在HTTP/2连接中，要求两端都要发送一个连接序言，作为对所使用协议的最终确认，并确定HTTP/2连接的初始设置。客户端和服务端各自发送不同的连接序言。

6. 一旦建立了HTTP/2连接，终端之间就可以开始交换帧了。所有的帧都以一个9字节的报头开始，后接变长的载荷：
   
   - Length: 载荷的长度
   
   - Type: 8位的值表示帧类型，决定了帧的格式和语义
   
   - Flags：为Type保留的bool标识，大小是8位，
   
   - R： 1位的保留字段，尚未定义语义
   
   - Stream Identifier: 31位无符号整型的流标识符。
   
   ```
   +-----------------------------------------------+
   |                 Length (24)                   |
   +---------------+---------------+---------------+
   |   Type (8)    |   Flags (8)   |
   +-+-------------+---------------+-------------------------------+
   |R|                 Stream Identifier (31)                      |
   +=+=============================================================+
   |                   Frame Payload (0...)                      ...
   +---------------------------------------------------------------+
   ```

7. HTTP/2与HTTP/1的报头结构一样，一键多值。除了用于HTTP请求和响应之外，还用于server push操作。

8. Header压缩和解压

9. 在一个HTTP/2的连接中，流是服务器与客户端之间用于帧交换的一个独立双向序列。

10. 流的多路复用会让TCP连接的使用产生竞争，这会导致流的阻塞。流控手段确保同一连接上的流互相之间不会产生炎症的妨碍。流控既可用于某个单独的流，也可用于整个连接。HTTP/2通过使用WINDOW_UPDATE帧提供了流控功能。


